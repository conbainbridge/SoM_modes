<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Streams of mind</title>
    <link rel="stylesheet" type="text/css" href="./jspsych/dist/jspsych.css">
    <script src="./jspsych/dist/jspsych.js"></script>
    <script src="./jspsych/dist/custom_plugins/plugin-survey-keytrack.js"></script>
    <script src="./jspsych/dist/custom_plugins/plugin-audio-keytrack.js"></script>
    <script src="./jspsych/dist/custom_plugins/plugin-survey-multi-choice-center.js"></script>
    <script src="./jspsych/dist/custom_plugins/plugin-ranking.js"></script>
    <script src="./jspsych/dist/custom_plugins/plugin-survey-text-number.js"></script>

    <script src="./jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="./jspsych/dist/plugin-html-button-response.js"></script>
    <script src="./jspsych/dist/plugin-audio-button-response.js"></script>

    <script src="./jspsych/dist/plugin-initialize-microphone.js"></script>
    <script src="./jspsych/dist/plugin-html-audio-response.js"></script>

    <script src="./jspsych/dist/plugin-survey-multi-select.js"></script>
    <script src="./jspsych/dist/plugin-survey-multi-choice.js"></script>
    <script src="./jspsych/dist/plugin-survey-likert.js"></script>
    <script src="./jspsych/dist/plugin-survey-text.js"></script>
  </head>
  <body></body>

<script>
    function downloadBlob(blob, filename) {
        // Create a temporary download link
        var link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.download = filename;

        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    function downloadAudio(jsPsychData) {
        const trials = jsPsychData.trials;
        trials
            .filter(trial => trial.trial_type == "html-audio-response")
            .forEach(atrial => {
                const base64AudioStr = atrial.response;
                const binaryData = window.atob(base64AudioStr);
                const buffer = new ArrayBuffer(binaryData.length);
                const array = new Uint8Array(buffer);
                for (let i = 0; i < binaryData.length; i++) {
                    array[i] = binaryData.charCodeAt(i);
                }
                const blob = new Blob([array], { type: 'audio/wav' });
                const filename = `tmp.${atrial.internal_node_id}.wav`
                downloadBlob(blob, filename);
            });
    }

    // Initialize JsPsych
    var jsPsych = initJsPsych({
    use_webaudio: false,
    on_finish: function(){
        jsPsych.data.displayData();
        downloadAudio(jsPsych.data.get());
    }
    });

    var timeline = [];
    var microphone = {
        type: jsPsychInitializeMicrophone
    };

    const hello_trial = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: 'Hello world!'
    }
    timeline.push(hello_trial)

    // Initialize randomized condition
    var condArray = ['PPrF', 'FPrP'];
    var randomCond = jsPsych.randomization.shuffle(condArray);
    var condition = randomCond[0]

    /* ~~~ CONSENT ~~~ */
    // EDIT THIS! Include inline form with the proper study info sheet
    var welcome = {
        type: jsPsychHtmlButtonResponse,
        button_html: '<button class="jspsych-btn" style="margin-bottom: 10px">%choice%</button>',
        stimulus: '<p align="center">Before you decide to participate, please read the following information:</p>'+
        '<p align="center">University of California, Los Angeles<br />'+
        '<b>RESEARCH INFORMATION SHEET</b><br />'+
        'Language in streams of consciousness</p>'+
        '<p align="left"><b>INTRODUCTION</b></p>'+
        '<p align="left">Constance Bainbridge and Dr. Rick Dale from the Department of Communication at the University of California, Los Angeles are conducting a research study. You were selected as a possible participant in this study because you are 18+ and are included in the Communication Study Pool at UCLA.  Your participation in this research study is voluntary.</p>'+
        '<p align="left"><b>WHAT SHOULD I KNOW ABOUT A RESEARCH STUDY?</b></p>'+
        '<p align="left"><ul><li align="left">This research study will be explained to you in detail in writing.</li>'+
        '<li align="left">Whether or not you take part is up to you.</li>'+
        '<li align="left">You can choose not to take part.</li>'+
        '<li align="left">You can agree to take part and later change your mind.</li>'+
        '<li align="left">Your decision will not be held against you.</li>'+
        '<li align="left">You can ask all the questions you want before you decide.</li></ul></p>'+
        '<p align="left"><b>WHY IS THIS RESEARCH BEING DONE?</b></p>'+
        '<p align="left">The goal of this study is to explore your thoughts, feelings, and experiences using a few prompts in a stream of consciousness writing activity. This website will capture a snapshot of your thought process as you’re typing.</p>'+
        '<p align="left"><b>HOW LONG WILL THE RESEARCH LAST AND WHAT WILL I NEED TO DO?</b></p>'+
        '<p align="left">Participation will take a total of about 60 minutes and you will be awarded 1 course credit. Partial credit may be awarded if you have completed at least one writing prompt.</p>'+
        '<p align="left">If you volunteer to participate in this study, the researcher will ask you to do the following:</p>'+
        '<p align="left"><ul><li align="left">Type out your thoughts, feelings, and experiences in three stream of consciousness style typing tasks.</li>'+
        '<li align="left">Answer a few questions about yourself, including questions about your demographics and surveys on a few personality traits.</li>'+
        '<li align="left">The entire study will take place online in this interface, and there will be a link at the end to return to SONA to automatically credit your account with course credit for study completion.</li></ul>'+
        '<p align="left"><b>ARE THERE ANY RISKS IF I PARTICIPATE?</b></p>'+
        '<p align="left">No potential risks or direct discomforts are anticipated. Because you may write whatever you feel in the study prompts, you may experience some discomfort depending on the topics you explore in your writing.</p>'+
        '<p align="left"><b>ARE THERE ANY BENEFITS IF I PARTICIPATE?</b></p>'+
        '<p align="left">You will not directly benefit from your participation in the research.</p>'+
        '<p align="left">The results of the research may help us to better understand the thoughts, feelings, and experiences people choose to write about under a stream of consciousness format.</p>'+
        '<p align="left">If you choose not to participate, you may exit out of the study at any point by closing the webpage. Your alternative to participating in this research study is to not participate.</p>'+
        '<p align="left"><b>HOW WILL INFORMATION ABOUT ME AND MY PARTICIPATION BE KEPT CONFIDENTIAL?</b><p>'+
        '<p align="left">The researchers will do their best to make sure that your private information is kept confidential. Information about you will be handled as confidentially as possible, but participating in research may involve a loss of privacy and the potential for a breach in confidentiality. Study data will be physically and electronically secured.  As with any use of electronic means to store data, there is a risk of breach of data security.</p>'+
        '<p align="left"><b>Use of personal information that can identify you:</b><br />Personal information will be separated from your responses. Participant data will be analyzed altogether, so your writing will not be published or shared publicly on its own, in case there is identifying information in the text.'+
        '<p align="left"><b>How information about you will be stored:</b><br />Data will be locally stored on the researchers\' computers and separated from identifying information. The filenames will not have identifying information in them. Data will be analyzed all together, such that data will not be linked on the individual level.</p>'+
        '<p align="left"><b>People and agencies that will have access to your information:</b><br />The research team and authorized UCLA personnel may have access to study data and records to monitor the study.  Research records provided to authorized, non-UCLA personnel will not contain identifiable information about you. Publications and/or presentations that result from this study will not identify you by name.</p>'+
        '<p align="left">Employees of the University may have access to identifiable information as part of routine processing of your information, such as lab work or processing credits. However, University employees are bound by strict rules of confidentiality.</p>'+
        '<p align="left"><b>How long information from the study will be kept:</b></p>'+
        '<p align="left">The data will be kept for 10 years.</p>'+
        '<p align="left"><b>USE OF DATA FOR FUTURE RESEARCH</b></p>'+
        '<p align="left">Your data, including de-identified data may be kept for use in future research.</p>'+
        '<p align="left"><b>WHO CAN I CONTACT IF I HAVE QUESTIONS ABOUT THIS STUDY?</b></p>'+
        '<p align="left"><b>The research team:</b><br />'+
        'If you have any questions, comments or concerns about the research, you can talk to the one of the researchers. Please contact either: cbainbridge@ucla.edu or rdale@ucla.edu'+
        '<p align="left"><b>UCLA Office of the Human Research Protection Program (OHRPP):</b><br />'+
        'If you have questions about your rights as a research subject, or you have concerns or suggestions and you want to talk to someone other than the researchers, you may contact the UCLA OHRPP by phone: (310) 206-2040; by email: participants@research.ucla.edu or by mail: Box 951406, Los Angeles, CA 90095-1406.</p>'+
        '<p align="left"><b>WHAT ARE MY RIGHTS IF I TAKE PART IN THIS STUDY?</b></p>'+
        '<p align="left"><ul><li align="left">You can choose whether or not you want to be in this study, and you may withdraw your consent and discontinue participation at any time.</li>'+
        '<li align="left">Whatever decision you make, there will be no penalty to you, and no loss of benefits to which you were otherwise entitled.</li>'+
        '<li align="left">You may refuse to answer any questions that you do not want to answer and still remain in the study.</li></ul></p>'+
        '<p align="left"><b><i>You may save a copy of this information to keep for your records.</i></b></p>',
        choices: ['Next']
    };

    /* ~~~ TRIALS ~~~ */
    // Intro
    var intro = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>In this task, you will be sharing your thoughts as they flow out in a stream of consciousness - whatever comes to mind.</p><p><b>Please write as though you were thinking aloud - don\'t worry about being grammatically correct or writing in complete sentences unless it feels natural to your thought process.</b></p><p>You will have 10 minutes per prompt to share as much as you want.</p>'+
        '<p><i>If you are struggling or would like mental health care and support, there are several resources available at UCLA. Please visit www.studentincrisis.ucla.edu to learn more, or contact UCLA Counseling and Psychological Services by phone: 310-825-0768 or by email: info@caps.ucla.edu. If there is an urgent concern or you are experiencing a crisis, please contact 911 or the UCLA police (310-825-1491), available 24/7.</i></p>',
        choices: ['Begin']
    };

    var mic_permission = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>In order to complete this study, you will need to give access to the microphone on your device.</p>',
        choices: ['Grant access']
    };

    var prompt_typed = {
        timeline: [
            {
                type: jsPsychHtmlButtonResponse,
                stimulus: '<p>You will be <b>typing</b> your thoughts as they flow out in a stream-of-consciousness. Write as though you were thinking aloud in free form. Don’t worry about being grammatically correct or writing in complete sentences unless it feels natural to your thought process.</p>'+
                '<p>You will be given a space to type out your thoughts. A timer at the top of the screen will let you know how much time you have left. Try not to stop typing unless your thoughts have stopped flowing.</p>',
                prompt: '',
                choices: ['Begin']
            },
            {
                type: jsPsychSurveyText,
                questions: [{
                    prompt: '<p>You will be <b>typing</b> your thoughts as they flow out in a stream-of-consciousness. Write as though you were thinking aloud in free form. Don’t worry about being grammatically correct or writing in complete sentences unless it feels natural to your thought process.</p>'+
                    '<p>You will be given a space to type out your thoughts. A timer at the top of the screen will let you know how much time you have left. Try not to stop typing unless your thoughts have stopped flowing.</p>'+
                    '<p><i>If you are struggling or would like mental health care and support, there are several resources available at UCLA. Please visit www.studentincrisis.ucla.edu to learn more, or contact UCLA Counseling and Psychological Services by phone: 310-825-0768 or by email: info@caps.ucla.edu. If there is an urgent concern or you are experiencing a crisis, please contact 911 or the UCLA police (310-825-1491), available 24/7.</i></p>',
                    rows: 50, columns: 100
                }],
                button_label: 'Next'
            }
        ],
        data: {"trialType": "present", "condition": condition}
        // trial_duration: '600000'
    };
    // timeline.push(prompt_typed)

    var prompt_spoken = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p>You will be <b>speaking</b> your thoughts as they flow out in a stream-of-consciousness. Speak as though you were thinking aloud in free form. Don’t worry about being grammatically correct or speaking in complete sentences unless it feels natural to your thought process.</p>'+
        '<p>You will be see an audio recorder on the next page to share your thoughts. A timer at the top of the screen will let you know how much time you have left. Try not to stop speaking unless your thoughts have stopped flowing.</p>',
        prompt: '',
        choices: ['Record']
    };

    var recorder = {
        type: jsPsychHtmlAudioResponse,
        stimulus: '<p>Recording now...</p>',
        recording_duration: 10000,
        save_audio_url: true
    }

    // Figure out how to save the file locally, how to decode base64 url into a file that can be decoded, or an actual audio file
    var replay_spoken = {
        type: jsPsychAudioButtonResponse,
            stimulus: ()=>{
                var recording = jsPsych.data.get().last(1).values()[0].audio_url;
                console.log(recording)
                return jsPsych.data.get().last(1).values()[0].audio_url;
            },
            prompt: '<p>How does it sound?.</p>',
            choices: ['Meow', 'Woof'],
    }

    /* ~~~ SURVEY ~~~ */
    // Demographics
    var langList = [
      'English', 'Abenaki', 'Abkhaz', 'Adyghe', 'Afrikaans', 'Ainu', 'Aklanon', 'Albanian', 'Algerian', 'American Sign Language', 'Apache', 'Arabic', 'Aragonese', 'Aramaic', 'Armenian', 'Avestan', 'Ayapathu', 'Aymara', 'Azeri', 'Balinese', 'Bamwe', 'Bantu', 'Basa', 'Basque', 'Belarusian', 'Bemba', 'Bengali', 'Berber', 'Betawi', 'Bicol', 'Bisaya', 'Bobangi', 'Bosnian', 'Brahui', 'Breton', 'Butuanon', 'Bukusu', 'Bulgarian', 'Burmese', 'Carib', 'Catalan', 'Catawba', 'Cayuga', 'Cebuano', 'Chamorro', 'Chechen', 'Cherokee', 'Chewa', 'Cheyenne', 'Chickasaw', 'Chinese/Cantonese/Yue', 'Chinese/Danzhou', 'Chinese/Gan', 'Chinese/Hakka', 'Chinese/Hokkien', 'Chinese/Mandarin', 'Chinese/Min Bei', 'Chinese/Min Dong', 'Chinese/Min Zhong', 'Chinese/Pu Xian', 'Chinese/Qiong Wen', 'Chinese/Shao Jiang', 'Chinese/Shaozhou Tuhua', 'Chinese/Taiwanese/Min Nan/Hokkien', 'Chinese/Wu/Shanghainese', 'Chinese/Xiang/Hunanese', 'Chinese/Xianghua', 'Chinese/Yue', 'Chinook', 'Ch\'ol', 'Chorti', 'Cispa', 'Coptic', 'Cornish', 'Corsican', 'Cree', 'Creole', 'Croatian', 'Czech', 'Danish', 'Delaware', 'Demonh\'ka', 'Denya', 'Duma', 'Dutch', 'Eggon', 'Ejagham', 'Ekegusii', 'Emakua', 'Eskimo', 'Esperanto', 'Estonian', 'Ewe', 'Fang', 'Faroese', 'Farsi', 'Finnish', 'Flemish', 'Frankish', 'French', 'Frisian', 'Fulfulde', 'Gaelic', 'Galician', 'Gaulish', 'Gamilaraay', 'Ganda', 'Gbari', 'Georgian', 'German', 'Gevove', 'Gilbertese', 'Ginyama', 'Gothic', 'Greek', 'Guarani', 'Gujarati', 'Gullah', 'Haida', 'Hakka', 'Hawaiian', 'Hausa', 'Hiligaynon', 'Hebrew', 'Hmong', 'Hindi', 'Hittite', 'Holoholo', 'Hungarian', 'Icelandic', 'Igbo', 'Ilongo', 'Indonesian', 'Ingush', 'Interlingua', 'Inuktitut', 'Inzebi', 'Irish', 'Ishkashmi', 'Italian', 'Jangshung', 'Japanese', 'Jita', 'Kalanga', 'Kannada', 'Kapampangan', 'Karelian', 'Kamviri', 'Karuk', 'Kashubian', 'Katcha', 'Kazakh', 'Kerewe', 'Khakas', 'Khmer', 'Khowar', 'Kiga', 'Kinyarwanda', 'Kituba', 'Klallam', 'Konkani', 'Korean', 'Koromfé', 'Koyo', 'Kurdish', 'Kyrgyz', 'Lao', 'Lakhota', 'Latgalian', 'Latin', 'Latvian', 'Lingala', 'Lithuanian', 'Livonian', 'Lojban', 'Lozi', 'Luxembourgish', 'Luwian', 'Lydian', 'Macedonian', 'Malagasy', 'Malay', 'Maliseet', 'Malayalam', 'Maltese', 'Mambwe', 'Manchu', 'Mandinka', 'Manx', 'Maori', 'Mapudungun', 'Marathi', 'Masaba', 'Mayan', 'Mayangna', 'Mawu', 'Miami', 'Michif', 'Miskitu', 'Mixtec', 'Mohawk', 'Mongolian', 'Mpongwe', 'Nahuatl', 'Nande', 'Nanticoke', 'Nauruan', 'Navajo', 'Ndebele', 'Nepalese', 'Newari', 'Nhirrpi', 'Norwegian', 'Nyambo', 'Nyamwezi', 'Occitan', 'Ojibwe', 'Olkola', 'Olutec', 'Onondaga', 'Oriya', 'Oscan', 'Oykangand', 'Pahlavi', 'Pakahn', 'Pali', 'Papiamento', 'Pashto', 'Pende', 'Passamdy', 'Phrygian', 'Pirahã', 'Polish', 'Popoluca', 'Portuguese', 'Potawatomi', 'Pulaar', 'Punjabi', 'Quechua', 'Quenya', 'Rapa Nui', 'Rasta', 'Rejang', 'Romani', 'Romanian', 'Roviana', 'Rotuman', 'Russian', 'Saanich', 'Saami', 'Samoan', 'Sanskrit', 'Sardinian', 'Scots', 'Serbian', 'Seri', 'Sherpa', 'Shi', 'Sina Bidoyoh', 'Shona', 'Shoshoni', 'Sindarin', 'Sinhalese', 'Slovak', 'Slovene', 'Sogdian', 'Somali', 'Sorbian', 'Spanish', 'Sranan', 'Sûdovian', 'Sumerian', 'Swabian', 'Swahili', 'Swedish', 'Swiss German', 'Tagalog', 'Tamasheq', 'Tahitian', 'Taino', 'Tajik', 'Tamazight', 'Tamil', 'Tarahumara', 'Tarok', 'Tatar', 'Telugu', 'Tetan', 'Thai', 'Tibetan', 'Tlingit', 'Tocharian', 'Tongan', 'Turkish', 'Turkmen', 'Twi', 'Ukrainian', 'Ulwa', 'Umbrian', 'Üqoi', 'Urdu', 'Uyghur', 'Uzbek', 'Venda', 'Veps', 'Vietnamese', 'Votic', 'Wagiman', 'Walloon', 'Warlpiri', 'Welsh', 'Wolof', 'Wyandot', 'Xhosa', 'Yaka', 'Yao', 'Yemba', 'Yiddish', 'Yoruba', 'Zarma', 'Zoque', 'Zulu', 'Other'
    ];

    var countryList = [
      'United States', 'Afghanistan', 'Albania', 'Algeria', 'Andorra', 'Angola', 'Antigua and Barbuda', 'Argentina', 'Armenia', 'Artsakh', 'Australia', 'Austria', 'Azerbaijan', 'The Bahamas', 'Bahrain', 'Bangladesh', 'Barbados', 'Belarus', 'Belgium', 'Belize', 'Benin', 'Bhutan', 'Bolivia', 'Bosnia and Herzegovina', 'Botswana', 'Brazil', 'Brunei', 'Bulgaria', 'Burkina Faso', 'Burundi', 'Cambodia', 'Cameroon', 'Canada', 'Cape Verde', 'Central African Republic', 'Chad', 'Chile', 'China', 'Colombia', 'Comoros', 'Democratic Republic of the Congo', 'Cook Islands', 'Costa Rica', 'Côte d\'Ivoire', 'Croatia', 'Cuba', 'Cyprus', 'Czech Republic', 'Denmark', 'Djibouti', 'Dominica', 'Dominican Republic', 'East Timor', 'Ecuador', 'Egypt', 'El Salvador', 'Equatorial Guinea', 'Eritrea', 'Estonia', 'Ethiopia', 'Fiji', 'Finland', 'France', 'Gabon', 'The Gambia', 'Georgia', 'Germany', 'Ghana', 'Greece', 'Grenada', 'Guatemala', 'Guinea', 'Guinea-Bissau', 'Guyana', 'Haiti', 'Honduras', 'Hong Kong', 'Hungary', 'Iceland', 'India', 'Indonesia', 'Iran', 'Iraq', 'Ireland', 'Israel', 'Italy', 'Ivory Coast', 'Jamaica', 'Japan', 'Jordan', 'Kazakhstan', 'Kenya', 'Kiribati', 'South Korea', 'Democratic People\'s Republic of Korea', 'Kosovo', 'Kuwait', 'Kyrgyzstan', 'Laos', 'Latvia', 'Lebanon', 'Lesotho', 'Liberia', 'Libya', 'Liechtenstein', 'Lithuania', 'Luxembourg', 'Macedonia', 'Madagascar', 'Malawi', 'Malaysia', 'Maldives', 'Mali', 'Malta', 'Marshall Islands', 'Mauritania', 'Mauritius', 'Mexico', 'Micronesia', 'Moldova', 'Monaco', 'Mongolia', 'Montenegro', 'Morocco', 'Mozambique', 'Myanmar', 'Namibia', 'Nauru', 'Nepal', 'The Netherlands', 'New Zealand', 'Nicaragua', 'Niger', 'Nigeria', 'Niue', 'Northern Cyprus', 'Norway', 'Oman', 'Pakistan', 'Palau', 'Palestine', 'Panama', 'Papua New Guinea', 'Paraguay', 'Peru', 'Philippines', 'Poland', 'Portugal', 'Qatar', 'Romania', 'Russia', 'Rwanda', 'Sahrawi Arab Democratic Republic', 'Saint Kitts and Nevis', 'Saint Lucia', 'Saint Vincent and the Grenadines', 'Samoa', 'San Marino', 'São Tomé and Príncipe', 'Saudi Arabia', 'Senegal', 'Serbia', 'Seychelles', 'Sierra Leone', 'Singapore', 'Slovakia', 'Slovenia', 'Solomon Islands', 'Somalia', 'Somaliland', 'South Africa', 'South Ossetia', 'Spain', 'Sri Lanka', 'Sudan', 'South Sudan', 'Suriname', 'Swaziland', 'Sweden', 'Switzerland', 'Syria', 'Taiwan', 'Tajikistan', 'Tanzania', 'Thailand', 'Togo', 'Tonga', 'Transnistria', 'Trinidad and Tobago', 'Tunisia', 'Turkey', 'Turkmenistan', 'Tuvalu', 'Uganda', 'Ukraine', 'United Arab Emirates', 'United Kingdom', 'Uruguay', 'Uzbekistan', 'Vanuatu', 'Vatican City', 'Venezuela', 'Vietnam', 'Yemen', 'Zambia', 'Zimbabwe'
    ]

    var USstateList = [
      'Alabama',
      'Alaska',
      'Arizona',
      'Arkansas',
      'California',
      'Colorado',
      'Connecticut',
      'Delaware',
      'District of Columbia',
      'Florida',
      'Georgia',
      'Hawaii',
      'Idaho',
      'Illinois',
      'Indiana',
      'Iowa',
      'Kansas',
      'Kentucky',
      'Louisiana',
      'Maine',
      'Maryland',
      'Massachusetts',
      'Michigan',
      'Minnesota',
      'Mississippi',
      'Missouri',
      'Montana',
      'Nebraska',
      'Nevada',
      'New Hampshire',
      'New Jersey',
      'New Mexico',
      'New York',
      'North Carolina',
      'North Dakota',
      'Ohio',
      'Oklahoma',
      'Oregon',
      'Pennsylvania',
      'Rhode Island',
      'South Carolina',
      'South Dakota',
      'Tennessee',
      'Texas',
      'Utah',
      'Vermont',
      'Virginia',
      'Washington',
      'West Virginia',
      'Wisconsin',
      'Wyoming'
    ]

    var surveyIntro = {
      type: jsPsychHtmlButtonResponse,
      stimulus: '<p align="center">Now we have a few questions about you.</p><p></p><br>',
      choices: ['Next']
    };

    var demographics = {
      timeline: [
          {
              type: SurveyTextNumPlugin,
              questions: [{ prompt: '<p align="center">How old are you?</p>', min_number: 18 }],
              data: {"trialType": "age"},
          },
          {
              type: jsPsychHtmlButtonResponse,
              stimulus: '<p align="center">What is your gender?</p>',
              prompt: '',
              choices: ['Female', 'Male', 'Other', 'Prefer not to answer'],
              data: {"trialType": "gender"}
          }
      ]
    };

    // var language = {
    //   type: 'survey-text-dropdown',
    //   questions: [
    //       {
    //       prompt: '<p align="center">What is your first/native language?</p>',
    //       choices: langList
    //       }
    //   ],
    //   data: {"trialType": "nativeLang"}
    // };

    var country = {
      type: jsPsychSurveyMultiSelect,
      questions: [
          {
              prompt: '<p align="center">What country/countries have you lived in during the covid-19 pandemic?</p>',
              options: countryList,
              horizontal: true,
              required: false,
              name: 'country'
          },
      ],
      data: { "trialType": "country"}
    }

    var USstate = {
      type: jsPsychSurveyMultiSelect,
      questions: [
          {
              prompt: '<p align="center">What US states have you lived in during the covid-19 pandemic?</p>',
              options: USstateList,
              horizontal: true,
              required: false,
              name: 'state'
          },
      ],
      data: { "trialType": "state"}
    }

    var USConditional = {
      timeline: [USstate],
      conditional_function: function(data) {
        var response = jsPsych.data.get().filter({trial_type: 'survey-multi-select'}).values()[0].response.country;
        if (response.includes('United States')) {
          return true;
        } else {
          return false;
        }
      }
    };

    // Journal questions
    var journal = {
        type: jsPsychHtmlButtonResponse,
        stimulus: '<p align="center">Do you keep a journal or diary?</p>',
        choices: ['Yes', 'No', 'Prefer not to say'],
        data: { "trialType": "journal"}
    }
    var journalFollowup = {
        timeline: [
            {
                type: jsPsychSurveyMultiChoice,
                questions: [
                    {
                        prompt: '<p align="center">How often do you write in your journal/diary?</p>',
                        options: ['Everyday', 'A few times a week', 'Around once a week', 'Around once a month', 'Less frequently'],
                        horizontal: true,
                        required: false,
                        name: 'journalFreq'
                    },
                ],
                data: { "trialType": "journalFreq"}
            },
            {
                type: jsPsychSurveyMultiSelect,
                questions: [
                    {
                        prompt: '<p align="center">What do you use your journal for?</p>',
                        options: ['Planning/to-do lists', 'Reflecting on my day', 'Working through emotions', 'Organizing my thoughts', 'Recording dreams', 'Other'],
                        horizontal: true,
                        required: false,
                        name: 'journalContent'
                    },
                ],
                data: { "trialType": "journalContent"}
            }
        ]
    }
    var journalOther = {
        type: jsPsychSurveyText,
        questions: [
            {prompt: 'What other purposes do you use your journal for?', name: 'journalOther'}

        ]
    }
    var journalConditional = {
        timeline: [journalFollowup],
        conditional_function: function() {
            var button = jsPsych.data
            .get()
            .last(1)
            .values()[0].response;
            if (button == 0) {
                return true;
            } else {
                return false;
            }
        }
    };
    var journalContentConditional = {
        timeline: [journalOther],
        conditional_function: function() {
            var selections = jsPsych.data
            .get()
            .last(1)
            .values()[0].response;
            var stringresponse = JSON.stringify(selections)
            if (stringresponse.includes("Other")) {
                console.log(stringresponse);
                return true;
            } else {
                console.log(stringresponse);
                return false;
            }
        }
    };

    // Communication experience and preference questions
    var practice = {
        type: jsPsychSurveyMultiSelect,
        questions: [
            {
                prompt: '<p align="center">Do you engage in any of the following practices?</p>',
                options: ['Therapy', 'Prayer', 'Mindfulness', 'Meditation'],
                horizontal: true,
                required: false,
                name: 'practice'
            },
        ],
        data: { "trialType": "practice"}
    };

    var commpref = {
        type: jsPsychRanking,
        alternatives: ['Texts/emails/written formats', 'Phone calls/voice only', 'Video calls', 'In person'], //i
        labels: ['Prefer a lot', 'Prefer a little', 'Dislike a little', 'Dislike a lot'], //j
        preamble: '<p>How do you prefer to converse with others?</p>',
        data: { "trialType": "commpref"}
    };

    // Expression questions
    var typingComfort = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">How comfortable did you feel expressing yourself openly when typing in these tasks?</p>',
                options: ['Very comfortable', 'Somewhat comfortable', 'Somewhat uncomfortable', 'Very uncomfortable'],
                horizontal: true,
                required: false,
                name: 'typingComfort'
            },
        ],
        data: { "trialType": "typingComfort"}
    };
    var speakingComfort = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">How comfortable did you feel expressing yourself openly when speaking in these tasks?</p>',
                options: ['Very comfortable', 'Somewhat comfortable', 'Somewhat uncomfortable', 'Very uncomfortable'],
                horizontal: true,
                required: false,
                name: 'speakingComfort'
            },
        ],
        data: { "trialType": "speakingComfort"}
    };
    var overallComfort = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">How comfortable were you expressing yourself overall?</p>',
                options: ['Very comfortable', 'Somewhat comfortable', 'Somewhat uncomfortable', 'Very uncomfortable'],
                horizontal: true,
                required: false,
                name: 'overallComfort'
            },
        ],
        data: { "trialType": "overallComfort"}
    };

    var guiltGeneral = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">How often do you feel guilty about your thoughts?</p>',
                options: ['Always', 'Most of the time', 'Some of the time', 'Never'],
                horizontal: true,
                required: false,
                name: 'guiltGeneral'
            },
        ],
        data: { "trialType": "guiltGeneral"}
    };
    var guiltTasks = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">Did you ever feel guilty about any thoughts you had during the task (regardless of whether you shared it or not)?</p>',
                options: ['Yes', 'No'],
                horizontal: true,
                required: false,
                name: 'guiltTasks'
            },
        ],
        data: { "trialType": "guiltTasks"}
    };

    var whoTo = {
        type: jsPsychSurveyMultiSelect,
        questions: [
            {
                prompt: '<p align="center">Who did you feel you were directing your thoughts to in your streams-of-consciousness during the tasks?</p>',
                options: ['Self', 'The researchers', 'Others who may be nearby', 'Imaginary audience', 'Imaginary specific individual', 'A higher power',  'No one'],
                horizontal: true,
                required: false,
                name: 'whoTo'
            },
        ],
        data: { "trialType": "whoTo"}
    };
    var overheard = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">Do you believe anyone could hear you during the tasks?</p>',
                options: ['Yes', 'No'],
                horizontal: true,
                required: false,
                name: 'overheard'
            },
        ],
        data: { "trialType": "overheard"}
    };
    var researchImpact = {
        type: jsPsychSurveyMultiChoice,
        questions: [
            {
                prompt: '<p align="center">DHow impacted, if at all, did you feel you were when expression yourself by knowing researchers may read your thoughts?</p>',
                options: ['Very impacted', 'Somewhat impacted', 'A little impacted', 'Not impacted'],
                horizontal: true,
                required: false,
                name: 'researchImpact'
            },
        ],
        data: { "trialType": "researchImpact"}
    };

    // Free text experience
    var freeField = {
        type: jsPsychSurveyText,
        questions: [
            {prompt: 'Is there anything else you want to share about your experience doing these tasks?', name: 'freeField', rows: 50, columns: 100}
        ]
    }

    // Mood and personality questions
    var anxietyBECK = {
      type: jsPsychSurveyMultiChoiceC,
      preamble: '<p align="left">Below is a list of common symptoms of anxiety. Please carefully read each item in the list. Indicate how much you have been bothered by that symptom during the past month, including today, by selecting the number below each symptom.</p><br><table align="center" width="90%" style="font-size: 0.9em"><tr><th>0</th><th>1</th><th>2</th><th>3</th></tr><tr><td>Not at all</td><td>Mildly, but it didn\'t bother me much</td><td>Moderately - it wasn\'t pleasant at times</td><td>Severely - it bothered me a lot</td></tr></table><br>',
      questions: [
        {
            prompt: 'Numbness or tingling',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA1'
        },
        {
            prompt: 'Feeling hot',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA2'
        },
        {
            prompt: 'Wobbliness in legs',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA3'
        },
        {
            prompt: 'Unable to relax',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA4'
        },
        {
            prompt: 'Fear of worst happening',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA5'
        },
        {
            prompt: 'Dizzy or lightheaded',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA6'
        },
        {
            prompt: 'Heart pounding / racing',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA7'
        },
        {
            prompt: 'Unsteady',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA8'
        },
        {
            prompt: 'Terrified or afraid',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA9'
        },
        {
            prompt: 'Nervous',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA10'
        },
        {
            prompt: 'Feeling of choking',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA11'
        },
        {
            prompt: 'Hands trembling',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA12'
        },
        {
            prompt: 'Shaky / unsteady',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA13'
        },
        {
            prompt: 'Fear of losing control',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA14'
        },
        {
            prompt: 'Difficulty in breathing',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA15'
        },
        {
            prompt: 'Fear of dying',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA16'
        },
        {
            prompt: 'Scared',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA17'
        },
        {
            prompt: 'Indigestion',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA18'
        },
        {
            prompt: 'Faint / lightheaded',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA19'
        },
        {
            prompt: 'Face flushed',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA20'
        },
        {
            prompt: 'Hot / cold sweats',
            options: ['0', '1', '2', '3'],
            horizontal: true,
            required: false,
            name: 'BeckA21'
        }
      ],
      data: {"trialType": "BECK_anxiety"}
    }

    var depressionBECK = {
        type: jsPsychSurveyMultiChoiceC,
        preamble: '<p align="left">This quesitionnaire consists of 20 groups of statements. Please read each group of statements carefully, and then pick out the <b>one statement</b> in each group that best describes the way you have been feeling during the <b>past two weeks, including today</b>. If several statements in the group seem to apply equally well, select the highest number for that group.<br>',
        questions: [
            {
                prompt: '<b>1. Sadness</b>',
                options: [
                    '0 - I do not feel sad.',
                    '1 - I feel sad much of the time.',
                    '2 - I am sad all the time.',
                    '3 - I am so sad or unhappy that I can\'t stand it.'
                ],
                horizontal: true,
                required: false,
                name: 'BeckD1no9'
            },
            {
                prompt: '<b>2. Pessimism</b>',
                options: [
                    '0 - I am not discouraged about my future.',
                    '1 - I feel more discouraged about my future than I used to be.',
                    '2 - I do not expect things to work out for me.',
                    '3 - I feel my future is hopeless and will only get worse.'
                ],
                horizontal: true,
                required: false,
                name: 'BeckD2no9'
            },
            {
                prompt: '<b>3. Past Failure</b>',
                options: [
                    '0 - I do not feel like a failure.',
                    '1 - I have failed more than I should have.',
                    '2 - As I look back, I see a lot of failures.',
                    '3 - I feel I am a total failure as a person.'
                ],
                horizontal: true,
                required: false,
                name: 'BeckD3no9'
            },
            {
                prompt: '<b>4. Loss of Pleasure</b>',
                options: [
                    '0 - I get as much pleasure as I ever did from the things I enjoy.',
                    '1 - I don\'t enjoy things as much as I used to.',
                    '2 - I get very little pleasure from the things I used to enjoy.',
                    '3 - I can\'t get any pleasure from the things I used to enjoy.'
                ],
                horizontal: true,
                required: false,
                name: 'BeckD4no9'
            },
            {
                prompt: '<b>5. Guilty Feelings</b>',
                options: [
                    '0 - I don\'t feel particularly guilty.',
                    '1 - I feel guilty over many things I have done or should have done.',
                    '2 - I feel quite guilty most of the time.',
                    '3 - I feel guilty all of the time.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd5no9'
            },
            {
                prompt: '<b>6. Punishment Feelings</b>',
                options: [
                    '0 - I don\'t feel I am being punished.',
                    '1 - I feel I may be punished.',
                    '2 - I expect to be punished.',
                    '3 - I feel I am being punished.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd6no9'
            },
            {
                prompt: '<b>7. Self-Dislike</b>',
                options: [
                    '0 - I feel the same about myself as ever.',
                    '1 - I have lost confidence in myself.',
                    '2 - I am disappointed in myself.',
                    '3 - I dislike myself.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd7no9'
            },
            {
                prompt: '<b>8. Self-Criticalness</b>',
                options: [
                    '0 - I don\'t criticize or blame myself more than usual.',
                    '1 - I am more critical of myself than I used to be.',
                    '2 - I criticize myself for all of my faults.',
                    '3 - I blame myself for everything bad that happens.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd8no9'
            },
            {
                prompt: '<b>9. Crying</b>',
                options: [
                    '0 - I don\'t cry anymore than I used to.',
                    '1 - I cry more than I used to.',
                    '2 - I cry over every little thing.',
                    '3 - I feel like crying, but I can\'t.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd10no9'
            },
            {
                prompt: '<b>10. Agitation</b>',
                options: [
                    '0 - I am no more restless or wound up than usual.',
                    '1 - I feel more restless or wound up than usual.',
                    '2 - I am so restless or agitated that it\'s hard to stay still.',
                    '3 - I am so restless or agitated that I hve to keep moving or doing something.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd11no9'
            },
            {
                prompt: '<b>11. Loss of Interest</b>',
                options: [
                    '0 - I have not lost interest in other people or activities.',
                    '1 - I am less interested in other people or things than before.',
                    '2 - I have lost most of my interest in other people or things.',
                    '3 - It\'s hard to get interested in anything.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd12no9'
            },
            {
                prompt: '<b>12. Indecisiveness</b>',
                options: [
                    '0 - I make decisions about as well as ever.',
                    '1 - I find it more difficult to make decisions than usual.',
                    '2 - I have much greater difficulty in making decisions than I used to.',
                    '3 - I have trouble making any decisions.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd13no9'
            },
            {
                prompt: '<b>13. Worthlessness</b>',
                options: [
                    '0 - I do not feel I am worthless.',
                    '1 - I don\'t consider myself as worthwhile and useful as I used to.',
                    '2 - I feel more worthless as compared to other people.',
                    '3 - I feel utterly worthless.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd14no9'
            },
            {
                prompt: '<b>14. Loss of Energy</b>',
                options: [
                    '0 - I have as much energy as ever.',
                    '1 - I have less energy than I used to have.',
                    '2 - I don\'t have enough energy to do very much.',
                    '3 - I don\'t have enough energy to do anything.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd15no9'
            },
            {
                prompt: '<b>15. Changes in Sleeping Pattern</b>',
                options: [
                    '0 - I have not experienced any change in my sleeping pattern.',
                    '1a - I sleep somewhat more than usual.',
                    '1b - I sleep somewhat less than usual.',
                    '2a - I sleep a lot more than usual',
                    '2b - I sleep a lot less than usual',
                    '3a - I sleep most of the day.',
                    '3b - I wake up 1-2 hours early and can\'t get back to sleep.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd16no9'
            },
            {
                prompt: '<b>16. Irritability</b>',
                options: [
                    '0 - I am no more irritable than usual.',
                    '1 - I am more irritable than usual.',
                    '2 - I am much more irritable than usual.',
                    '3 - I am irritable all the time.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd17no9'
            },
            {
                prompt: '<b>17. Changes in Appetite</b>',
                options: [
                    '0 - I have not experienced any change in my appetite.',
                    '1a - My appetite is somewhat less than usual.',
                    '1b - My appetite is somewhat greater than usual.',
                    '2a - My appetite is much less than before.',
                    '2b - My appetite is much greater than usual.',
                    '3a - I have no appetite at all.',
                    '3b - I crave food all the time.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd18no9'
            },
            {
                prompt: '<b>18. Concentration Difficulty</b>',
                options: [
                    '0 - I can concentrate as well as ever.',
                    '1 - I can\'t concentrate as well as usual.',
                    '2 - It\'s hard to keep my mind on anything for very long.',
                    '3 - I find I can\'t concentrate on anything.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd19no9'
            },
            {
                prompt: '<b>19. Tiredness of Fatigue</b>',
                options: [
                    '0 - I am no more tired or fatigued than usual.',
                    '1 - I get more tired or fatigued more easily than usual.',
                    '2 - I am too tired or fatigued to do a lot of the things I used to do.',
                    '3 - I am too tired or fatigued to do most of the things I used to do.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd20no9'
            },
            {
                prompt: '<b>20. Loss of Interest in Sex</b>',
                options: [
                    '0 - I have not noticed any recent change in my interest in sex.',
                    '1 - I am less interested in sex than I used to be.',
                    '2 - I am much less interested in sex now.',
                    '3 - I have lost interest in sex completely.'
                ],
                horizontal: true,
                required: false,
                name: 'Beckd21no9'
            }
        ],
        data: {"trialType": "BECK_depression"}
    }

    var bigFive = {
        type: jsPsychSurveyMultiChoiceC,
        preamble: '<p align="left">Here are a number of characteristics that may or may not apply to you. For example, do you agree that you are someone who likes to spend time with others? Please write a number next to each statement to indicate the extent to which you agree or disagree with that statement.</p>'+
        '<p><table align="center">'+
            '<tr>'+
                '<th style="padding:10px">Disagree strongly</th><th style="padding:10px">Disagree a little</th><th style="padding:10px">Neither agree nor disagree</th><th style="padding:10px">Agree a little</th><th style="padding:10px">Agree strongly</th>'+
            '</tr>'+
            '<tr>'+
                '<td>1</td><td>2</td><td>3</td><td>4</td><td>5</td>'+
            '</tr>'+
        '</table></p>'+
        '<p><u>I see myself as someone who...</u></p>',
        questions: [
            {
                prompt: '1. Is talkative',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big1'
            },
            {
                prompt: '2. Tends to find fault in others',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big2'
            },
            {
                prompt: '3. Does a thorough job',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big3'
            },
            {
                prompt: '4. Is depressed, blue',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big4'
            },
            {
                prompt: '5. Is original, comes up with new ideas',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big5'
            },
            {
                prompt: '6. Is reserved',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big6'
            },
            {
                prompt: '7. Is helpful and unselfish with others',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big7'
            },
            {
                prompt: '8. Can be somewhat careless',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big8'
            },
            {
                prompt: '9. Is relaxed, handles stress well',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big9'
            },
            {
                prompt: '10. Is curious about many different things',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big10'
            },
            {
                prompt: '11. Is full of energy',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big11'
            },
            {
                prompt: '12. Starts quarrels with others',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big12'
            },
            {
                prompt: '13. Is a reliable worker',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big13'
            },
            {
                prompt: '14. Can be tense',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big14'
            },
            {
                prompt: '15. Is ingenious, a deep thinker',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big15'
            },
            {
                prompt: '16. Generates a lot of enthusiasm',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big16'
            },
            {
                prompt: '17. Has a forgiving nature',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big17'
            },
            {
                prompt: '18. Tends to be disorganized',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big18'
            },
            {
                prompt: '19. Worries a lot',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big19'
            },
            {
                prompt: '20. Has an active imagination',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big20'
            },
            {
                prompt: '21. Tends to be quiet',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big21'
            },
            {
                prompt: '22. Is generally trusting',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big22'
            },
            {
                prompt: '23. Tends to be lazy',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big23'
            },
            {
                prompt: '24. Is emotionally stable, not easily upset',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big24'
            },
            {
                prompt: '25. Is inventive',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big25'
            },
            {
                prompt: '26. Has an assertive personality',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big26'
            },
            {
                prompt: '27. Can be cold and aloof',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big27'
            },
            {
                prompt: '28. Perseveres until the task is finished',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big28'
            },
            {
                prompt: '29. Can be moody',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big29'
            },
            {
                prompt: '30. Values artistic, aesthetic experiences',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big30'
            },
            {
                prompt: '31. Is sometimes shy, inhibited',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big31'
            },
            {
                prompt: '32. Is considerate and kind to almost everyone',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big32'
            },
            {
                prompt: '33. Does things efficiently',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big33'
            },
            {
                prompt: '34. Remains calm in tense situations',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big34'
            },
            {
                prompt: '35. Prefers work that is routine',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big35'
            },
            {
                prompt: '36. Is outgoing, sociable',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big36'
            },
            {
                prompt: '37. Is sometimes rude to others',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big37'
            },
            {
                prompt: '38. Make plans and follows through with them',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big38'
            },
            {
                prompt: '39. Gets nervous easily',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big39'
            },
            {
                prompt: '40. Likes to reflect, play with ideas',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big40'
            },
            {
                prompt: '41. Has few artistic interests',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big41'
            },
            {
                prompt: '42. Likes to cooperate with others',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big42'
            },
            {
                prompt: '43. Is easily distracted',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big43'
            },
            {
                prompt: '44. Is sophisticated in art, music, or literature',
                options: ['1', '2', '3', '4', '5'],
                horizontal: true,
                name: 'Big44'
            },
        ]
    };

    var urlParam = window.location.search;
    var userID = urlParam.replace('?id=', '');

    var dataLevels = {
      type: jsPsychHtmlButtonResponse,
      stimulus: `<p>What is your preference and comfort level for how your data from this study is used or seen?</p><p>Unless you choose to have your data deleted, results would be reported in the aggregate across many participants. In cases where you are comfortable with anyone seeing your data, we may include excerpts for demonstration sake or researchers may download it without requesting special access directly from the research team. We will not include identifiable information outside of what you may have written in your streams-of-consciousness.</p>`,
      choices: ['Only the researchers on this project can see or use my original data', 'Researchers outside of this project\'s team can request access to my original data', 'You may add my data to an open-source database or share excerpts - anyone could potentially see it', '<span style="color:red">Please delete my data - I don\'t want anyone using or seeing it.</span>'],
      margin_vertical: '8px'
    };

    var urlParam = window.location.search;
    var userID = urlParam.replace('?id=', '');

    var debrief = {
      type: jsPsychHtmlButtonResponse,
      stimulus: `<p>Thank you for participating in this study!</p><p>In this study, we\’re interested in understanding how people think about the past, present, and future when considering the COVID-19 pandemic. We're also interested in how differences between individuals may be predictive of how they write in a stream of consciousness style format.</p><p>If you have any questions or comments about this research, you may contact the researchers at cbainbridge@ucla.edu.</p><p><i>If you are struggling or would like mental health care and support, there are several resources available at UCLA. Please visit www.studentincrisis.ucla.edu to learn more, or contact UCLA Counseling and Psychological Services by phone: 310-825-0768 or by email: info@caps.ucla.edu. If there is an urgent concern or you are experiencing a crisis, please contact 911 or the UCLA police (310-825-1491), available 24/7.</i></p>`,
      choices: ['Return to SONA for credit'],
    }


    /* ~~~ END ~~~ */


    // // Build out intro and initialization timeline
    // timeline.push(
    //     welcome,
    //     mic_permission,
    //     microphone
    // );

    // // Prepare condition - Add a trial that has both spoken and typed simultaneous to add into randomization
    // if (condition == 'TS') {
    //     timeline.push(
    //         prompt_typed,
    //         prompt_spoken,
    //         recorder,
    //         // replay_spoken
    //     );
    // } else if (condition == 'ST') {
    //     timeline.push(
    //         prompt_spoken,
    //         recorder,
    //         // replay_spoken,
    //         prompt_typed
    //     );
    // }

    // // Concluding questions
    // timeline.push(
    //     surveyIntro,
    //     demographics,
    //     journal,
    //     journalConditional
    // );

    // var personalityArray = [depressionBECK, anxietyBECK, bigFive];
    // var personalityArrayR = jsPsych.randomization.shuffle(personalityArray);
    // timeline.push(personalityArrayR[0], personalityArrayR[1], personalityArrayR[2]);

    // // End of experiment
    // timeline.push(
    //     dataLevels,
    //     debrief
    // );

    // Questions timing test timeline
    timeline.push(
        // hello_trial,
        demographics,
        // language,
        journal,
        journalConditional,
        journalContentConditional,
        practice,
        commpref,
        bigFive,
        anxietyBECK,
        depressionBECK,
        typingComfort,
        speakingComfort,
        overallComfort,
        freeField,
        debrief
    );

    // Experiment logic
    // let sona_id = jsPsych.data.urlVariables()['sona_id']


    jsPsych.run(timeline)
	</script>
</html>
